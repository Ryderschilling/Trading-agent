<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Trading Agent</title>

    <link rel="stylesheet" href="/styles-v4.css" />
  </head>

  <body>
    <div class="bg-wash"></div>

    <header class="topbar">
      <div class="topbar-left">
        <div class="brand">
          <div class="brand-dot"></div>
          <div class="brand-text">Trading Agent</div>
        </div>

        <nav class="tabs">
          <a class="tab active" href="/">Workspace</a>
          <a class="tab" href="/outcomes.html">Outcomes</a>
        </nav>
      </div>

      <div class="topbar-right">
        <button id="enableSound" class="btn btn-ghost">Enable Sound</button>
        <div class="status">
          <div class="status-dot" id="socketDot"></div>
          <div class="status-text">Realtime</div>
        </div>
      </div>
    </header>

    <main class="shell">
      <!-- HERO -->
      <section class="hero">
        <div class="hero-card card">
          <div class="hero-head">
            <div>
              <div class="hero-title">Trading Agent Active</div>
              <div class="hero-sub">Signals scanner + A+ entry feed (break + retest).</div>
            </div>

            <!-- Overall watchlist market bias (majority vs VWAP) -->
            <div id="overallBiasPill" class="bias-pill neutral">NEUTRAL</div>   


            <div class="hero-chip">
              <span class="chip-dot"></span>
              Scanning Watchlist
            </div>
          </div>

          <div class="hero-grid">
            <!-- SIGNALS SCANNER -->
            <div class="card card-inner" id="signalsCard">
              <div class="card-head">
                <div>
                  <div class="card-title">Signals</div>
                  <div class="card-hint">Strong/weak vs VWAP + SPY/QQQ alignment + market bias</div>
                </div>
                <a class="card-link" href="#feed">A+ entries</a>
              </div>

              <!-- A+ PINGS (quick glance) -->
              <div class="aplus-wrap" id="aplus">
                <div class="card aplus-card">
                  <div class="card-head">
                    <div>
                      <div class="card-title">A+ Pings</div>
                      <div class="card-hint">Newest A+ events (forming/entry/invalidation)</div>
                    </div>
                    <a class="card-link" href="#feed">Full feed</a>
                  </div>

                  <div id="aPlusList" class="list"></div>
                  <div id="aPlusEmpty" class="small" style="padding: 0 16px 16px 16px;">
                    No pings yet.
                  </div>
                </div>
              </div>

              <div class="small" id="marketBias"></div>
              <div class="small" id="indexStatus" style="margin-top:6px;"></div>

              <div style="margin-top:12px;">
                <div class="small" style="margin-bottom:6px;">Strong (above VWAP + aligned)</div>
                <div id="strongList" class="list"></div>
              </div>

              <div style="margin-top:12px;">
                <div class="small" style="margin-bottom:6px;">Weak (below VWAP + aligned)</div>
                <div id="weakList" class="list"></div>
              </div>

              <div style="margin-top:12px;">
                <div class="small" style="margin-bottom:6px;">Forming A+ Setups (armed — waiting for retest)</div>
                <div id="formingList" class="list"></div>
              </div>
            </div>

            <!-- WATCHLIST -->
            <div class="card card-inner" id="watchlistCard">
              <div class="card-head">
                <div>
                  <div class="card-title">Watchlist</div>
                  <div class="card-hint">Add/remove symbols below.</div>
                </div>
              </div>

              <div class="watch-controls">
                <input id="symInput" class="input" placeholder="Add symbol (e.g. PLTR)" />
                <button id="addBtn" class="btn btn-primary">Add</button>
              </div>

              <div id="watchChips" class="chips"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- FEED -->
      <section class="stack" id="feed">
        <div class="card">
          <div class="card-head">
            <div>
              <div class="card-title">Activity Feed</div>
              <div class="card-hint">A+ ENTRY only (execution feed)</div>
            </div>
          </div>

          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Symbol</th>
                  <th>Message</th>
                  <th>Market</th>
                  <th>RS</th>
                  <th>Dir</th>
                  <th>Level</th>
                  <th>Level Px</th>
                  <th>Close</th>
                </tr>
              </thead>
              <tbody id="feedBody"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Modal: Outcome details (click an activity row) -->
      <div id="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:9999;">
        <div style="max-width:760px; margin:6vh auto; background:#0b1020; border:1px solid rgba(255,255,255,0.08); border-radius:16px; overflow:hidden;">
          <div style="display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid rgba(255,255,255,0.08);">
            <div>
              <div style="font-weight:700;">Signal Details</div>
              <div class="small" id="modalSub">—</div>
            </div>
            <button id="modalClose" class="btn btn-ghost">Close</button>
          </div>
          <div style="padding:16px;">
            <div id="modalBody" class="small">Loading…</div>
          </div>
        </div>
      </div>
    </main>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/app.js?v=6"></script>
  </body>
</html>