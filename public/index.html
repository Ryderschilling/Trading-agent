<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Workspace â€¢ Trading Agent</title>

    <link rel="stylesheet" href="/styles-v4.css" />
    <script src="/ui.js" defer></script>
  </head>

  <body>
    <div class="bg-wash"></div>

    <header class="topbar">
      <div class="topbar-left">
        <div class="brand">
          <span class="brand-dot"></span>
          <span class="brand-text">Trading Agent</span>
        </div>
    
        <nav class="tabs">
          <a class="tab active" href="/index.html">Workspace</a>
          <a class="tab" href="/outcomes.html">Outcomes</a>
          <a class="tab" href="/watchlist.html">Watch</a>
          <a class="tab" href="/rules.html">Rules</a>
          <a class="tab" href="/backtest.html">Backtest</a>
        </nav>
      </div>
    
      <div class="topbar-right">
        <div class="status">
          <span id="socketDot" class="status-dot"></span>
          <span id="socketText">Realtime</span>
        </div>
    
        <button id="themeToggle" class="btn btn-ghost" type="button">ðŸŒ™</button>
      </div>
    </header>

    <main class="shell">
      <section class="stack">

        <!-- ROW 1: Activity feed (full width) -->
        <div class="card">
          <div class="card-head">
            <div>
              <div class="card-title">Activity feed</div>
              <div class="card-hint">Live signals only (auto-expire). Outcomes stores history.</div>
            </div>
            <div class="card-actions">
              <button class="btn small" id="enableSound">Enable sound</button>
            </div>
          </div>

          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th style="width:88px;">Time</th>
                  <th style="width:90px;">Symbol</th>
                  <th style="width:90px;">Market</th>
                  <th style="width:70px;">RS</th>
                  <th style="width:70px;">Dir</th>
                  <th>Message</th>
                </tr>
              </thead>
              <tbody id="feedBody"></tbody>
            </table>
          </div>
        </div>

        <!-- ROW 2: A+ pings (left) + Market snapshot (right) -->
        <div class="workspace-row2">

          <!-- A+ PINGS -->
          <div class="card">
            <div class="card-head">
              <div>
                <div class="card-title">A+ pings</div>
                <div class="card-hint">Clean list: forming removed once A+ triggers.</div>
              </div>
            </div>

            <div id="aPlusEmpty" class="small" style="padding: 12px;">No A+ entries yet.</div>
            <div class="list" id="aPlusList"></div>
          </div>

          <!-- MARKET SNAPSHOT (single contained box with categories) -->
          <div class="card">
            <div class="card-head">
              <div>
                <div class="card-title">Market snapshot</div>
                <div class="card-hint">Bias + index VWAP status.</div>
              </div>
              <div class="card-actions">
                <span id="overallBiasPill" class="pill">â€”</span>
                <span id="dataLivePill" class="pill">â€”</span>
              </div>
            </div>

            <!-- Top summary (same as before) -->
            <div class="grid-3">
              <div class="panel">
                <div class="panel-title">Market Bias</div>
                <div class="panel-value" id="marketBias">â€”</div>
              </div>
              <div class="panel">
                <div class="panel-title">Index Status</div>
                <div class="panel-value" id="indexStatus">â€”</div>
              </div>
              <div class="panel">
                <div class="panel-title">Notes</div>
                <div class="panel-value small">Signals only during market hours.</div>
              </div>
            </div>

            <!-- Divider (kept inside the same box) -->
            <div style="height:1px;background:var(--border);margin:12px 0;"></div>

            <!-- Categories for tickers (inside same card) -->
            <div class="grid-3">
              <div class="panel">
                <div class="panel-title">Strong</div>
                <div class="panel-value small">Aligned with market bias.</div>
                <div class="list" id="strongList" style="margin-top:10px;"></div>
              </div>

              <div class="panel">
                <div class="panel-title">Weak</div>
                <div class="panel-value small">Aligned with market bias.</div>
                <div class="list" id="weakList" style="margin-top:10px;"></div>
              </div>

              <div class="panel">
                <div class="panel-title">Forming</div>
                <div class="panel-value small">Only during market hours.</div>
                <div class="list" id="formingList" style="margin-top:10px;"></div>
              </div>
            </div>
          </div>

        </div>
      </section>
    </main>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/app.js?v=12"></script>
  </body>
</html>